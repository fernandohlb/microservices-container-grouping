ylab("Memory Usage(Gbi)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/memory_usage_scenario_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_memory_usage_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/memory_usage_scenario_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_memory_usage_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figMemoryUsage.scenario)
consolidated_table_summary = consolidate_summary_v2(memory_consolidated_table,memory_consolidated_table$memory_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
######################### NETWORK RESULTS #########################
metrics <- c("network_receive","network_transmit")
network_consolidated_table = consolidate_table_by_time(origem_folder,samples, workloads, scenarios,"network",metrics,with_hpa)
network_consolidated_table <- network_consolidated_table %>%
mutate(across(.cols = c(network_receive_result), .fns = ~.x /1024/1024))
network_consolidated_table <- network_consolidated_table %>%
mutate(across(.cols = c(network_transmit_result), .fns = ~.x /1024/1024*-1))
network_consolidated_table$network_total_result <- with(network_consolidated_table, network_receive_result + network_transmit_result)
View(network_consolidated_table)
figNetworkUsage.receive.scenario <- ggplot(network_consolidated_table, aes(x=factor(seconds), y=network_receive_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("Network Usage Receive (Mb/s)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/network_usage_receive_consolidated.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_receive_consolidated.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/network_usage_receive_hpa_consolidated.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_receive_hpa_consolidated.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figNetworkUsage.receive.scenario)
consolidated_table_summary <- consolidate_summary_v2(network_consolidated_table,network_consolidated_table$network_receive_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
pdf_file = paste(destination_folder,"/network_usage_receive_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_receive_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/network_usage_receive_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_receive_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figNetworkUsage.receive.scenario)
consolidated_table_summary <- consolidate_summary_v2(network_consolidated_table,network_consolidated_table$network_receive_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
figNetworkUsage.transmit.scenario <- ggplot(network_consolidated_table, aes(x=factor(seconds), y=network_transmit_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("Network Usage Transmit (Mb/s)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/network_usage_transmit_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_transmit_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/network_usage_transmit_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_transmit_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figNetworkUsage.transmit.scenario)
consolidated_table_summary <- consolidate_summary_v2(network_consolidated_table,network_consolidated_table$network_transmit_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
figNetworkUsage.transmit.scenario <- ggplot(network_consolidated_table, aes(x=factor(seconds), y=network_total_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("Network Usage Total (Mb/s)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/network_usage_total_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_total_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/network_usage_total_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_total_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figNetworkUsage.total.scenario)
figNetworkUsage.total.scenario <- ggplot(network_consolidated_table, aes(x=factor(seconds), y=network_total_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("Network Usage Total (Mb/s)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/network_usage_total_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_total_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/network_usage_total_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_total_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figNetworkUsage.total.scenario)
consolidated_table_summary <- consolidate_summary_v2(network_consolidated_table,network_consolidated_table$network_total_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
######################### FILESYSTEM RESULTS #########################
metrics <- c("disk_usage")
filesystem_consolidated_table = consolidate_table_by_time(origem_folder,samples, workloads, scenarios,"filesystem",metrics,with_hpa)
filesystem_consolidated_table <- filesystem_consolidated_table %>%
mutate(across(.cols = c(disk_usage_result), .fns = ~.x /1024/1024))
View(filesystem_consolidated_table)
figDiskUsage.scenario <- ggplot(filesystem_consolidated_table, aes(x=factor(seconds), y=disk_usage_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("Network Usage Total (Mb/s)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/disk_usage_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_disk_usage_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/disk_usage_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_disk_usage_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figDiskUsage.scenario)
consolidated_table_summary <- consolidate_summary_v2(filesystem_consolidated_table,filesystem_consolidated_table$disk_usage_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
setwd("~/Documentos/Dev/microservices-container-grouping/experiments_results")
library("ggplot2")
library("ggrepel")
library(dplyr)
source("results_functions.R")
with_hpa = TRUE
workloads <- c("300", "2400","4500")
scenarios <- c("benchmark","all-in-one","by-stack","by-dependencies")
samples <- 1:6
if (with_hpa) {
origem_folder = "raw_results_distributed"
destination_folder = "graphics_and_tables_by_time/resources/with_hpa"
} else {
origem_folder = "raw_results"
destination_folder = "graphics_and_tables_by_time/resources/not_hpa"
}
######################### CPU RESULTS #########################
metrics <- c("cpu_usage")
cpu_consolidated_table = consolidate_table_by_time(origem_folder,samples, workloads, scenarios,"cpu",metrics,with_hpa)
figCpuUsage.scenario <- ggplot(cpu_consolidated_table, aes(x=factor(seconds), y=cpu_usage_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("CPU Usage (cores)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/cpu_usage_scenario_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_cpu_usage_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/cpu_usage_scenario_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_cpu_usage_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figCpuUsage.scenario)
consolidated_table_summary = consolidate_summary_v2(cpu_consolidated_table,cpu_consolidated_table$cpu_usage,workloads,scenarios)
#consolidated_table_summary <- consolidate_summary(cpu_consolidated_table, cpu_consolidated_table$cpu_usage, workloads, scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
######################### MEMORY RESULTS #########################
metrics <- c("memory")
memory_consolidated_table = consolidate_table_by_time(origem_folder,samples, workloads, scenarios,"memory",metrics,with_hpa)
memory_consolidated_table <- memory_consolidated_table %>%
mutate(across(.cols = c(memory_result), .fns = ~.x /1024/1024/1024))
figMemoryUsage.scenario <- ggplot(memory_consolidated_table, aes(x=factor(seconds), y=memory_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("Memory Usage(Gbi)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/memory_usage_scenario_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_memory_usage_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/memory_usage_scenario_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_memory_usage_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figMemoryUsage.scenario)
consolidated_table_summary = consolidate_summary_v2(memory_consolidated_table,memory_consolidated_table$memory_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
######################### NETWORK RESULTS #########################
metrics <- c("network_receive","network_transmit")
network_consolidated_table = consolidate_table_by_time(origem_folder,samples, workloads, scenarios,"network",metrics,with_hpa)
network_consolidated_table <- network_consolidated_table %>%
mutate(across(.cols = c(network_receive_result), .fns = ~.x /1024/1024))
network_consolidated_table <- network_consolidated_table %>%
mutate(across(.cols = c(network_transmit_result), .fns = ~.x /1024/1024*-1))
network_consolidated_table$network_total_result <- with(network_consolidated_table, network_receive_result + network_transmit_result)
figNetworkUsage.receive.scenario <- ggplot(network_consolidated_table, aes(x=factor(seconds), y=network_receive_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("Network Usage Receive (Mb/s)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/network_usage_receive_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_receive_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/network_usage_receive_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_receive_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figNetworkUsage.receive.scenario)
consolidated_table_summary <- consolidate_summary_v2(network_consolidated_table,network_consolidated_table$network_receive_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
figNetworkUsage.transmit.scenario <- ggplot(network_consolidated_table, aes(x=factor(seconds), y=network_transmit_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("Network Usage Transmit (Mb/s)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/network_usage_transmit_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_transmit_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/network_usage_transmit_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_transmit_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figNetworkUsage.transmit.scenario)
consolidated_table_summary <- consolidate_summary_v2(network_consolidated_table,network_consolidated_table$network_transmit_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
figNetworkUsage.total.scenario <- ggplot(network_consolidated_table, aes(x=factor(seconds), y=network_total_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("Network Usage Total (Mb/s)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/network_usage_total_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_total_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/network_usage_total_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_network_usage_total_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figNetworkUsage.total.scenario)
consolidated_table_summary <- consolidate_summary_v2(network_consolidated_table,network_consolidated_table$network_total_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
######################### FILESYSTEM RESULTS #########################
metrics <- c("disk_usage")
filesystem_consolidated_table = consolidate_table_by_time(origem_folder,samples, workloads, scenarios,"filesystem",metrics,with_hpa)
filesystem_consolidated_table <- filesystem_consolidated_table %>%
mutate(across(.cols = c(disk_usage_result), .fns = ~.x /1024/1024))
figDiskUsage.scenario <- ggplot(filesystem_consolidated_table, aes(x=factor(seconds), y=disk_usage_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("Network Usage Total (Mb/s)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/disk_usage_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_disk_usage_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/disk_usage_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_disk_usage_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figDiskUsage.scenario)
consolidated_table_summary <- consolidate_summary_v2(filesystem_consolidated_table,filesystem_consolidated_table$disk_usage_result,workloads,scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
setwd("~/Documentos/Dev/microservices-container-grouping/experiments_results")
library("ggplot2")
library("ggrepel")
library(dplyr)
source("results_functions.R")
with_hpa = TRUE
workloads <- c("300", "2400","4500")
scenarios <- c("benchmark","all-in-one","by-stack","by-dependencies")
samples <- 1:6
if (with_hpa) {
origem_folder = "raw_results_distributed"
destination_folder = "graphics_and_tables_by_time/resources/with_hpa"
} else {
origem_folder = "raw_results"
destination_folder = "graphics_and_tables_by_time/resources/not_hpa"
}
######################### CPU RESULTS #########################
metrics <- c("cpu_usage")
cpu_consolidated_table = consolidate_table_by_time(origem_folder,samples, workloads, scenarios,"cpu",metrics,with_hpa)
figCpuUsage.scenario <- ggplot(cpu_consolidated_table, aes(x=factor(seconds), y=cpu_usage_result, color = factor(scenario))) +
geom_boxplot(position = position_dodge(width = 0.9)) +
stat_summary(
fun = median,
geom = 'line',
aes(group = scenario, colour = factor(scenario)),
position = position_dodge(width = 0.9) #this has to be added
) +
facet_wrap(~workload,ncol=1, scales = "free", labeller = as_labeller(c('300'='Low', '2400'='Medium', '4500'='High'))) +
#ggtitle("Requests/s x Scenario") +
xlab("Seconds") +
ylab("CPU Usage (cores)")+
guides(color = guide_legend(title="Scenario")) +
theme(plot.title = element_text(hjust = 0.5, vjust = 5, size = 20),
strip.text = element_text(size= 20),
plot.margin = unit(c(1,1,1,1), "cm"),
axis.text = element_text(size = 16),
axis.text.x = element_text(angle = -45),
legend.title = element_text(size = 14),
legend.text = element_text(size = 12),
axis.title = element_text(size = 16),
axis.title.y=element_text(vjust=5),
axis.title.x=element_text(vjust=-5))
pdf_file = paste(destination_folder,"/cpu_usage_scenario_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_cpu_usage_by_time.csv",sep = "")
if (with_hpa) {
pdf_file = paste(destination_folder,"/cpu_usage_scenario_hpa_by_time.pdf",sep = "")
table_file = paste(destination_folder,"/summarized_cpu_usage_hpa_by_time.csv",sep = "")
}
pdf(pdf_file, width = 16, height = 9)
print(figCpuUsage.scenario)
consolidated_table_summary = consolidate_summary_v2(cpu_consolidated_table,cpu_consolidated_table$cpu_usage,workloads,scenarios)
#consolidated_table_summary <- consolidate_summary(cpu_consolidated_table, cpu_consolidated_table$cpu_usage, workloads, scenarios)
write.table(consolidated_table_summary, table_file, sep=",",row.names=FALSE)
dev.off()
